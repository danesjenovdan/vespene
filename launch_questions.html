

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Launch Questions &mdash; Vespene  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Pipelines" href="pipelines.html" />
    <link rel="prev" title="Importing Organizations" href="importing.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="contents.html" class="icon icon-home"> Vespene
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html">About Vespene</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">Setup Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
</ul>
<p class="caption"><span class="caption-text">Fundamentals</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="workers.html">Workers</a></li>
<li class="toctree-l1"><a class="reference internal" href="projects.html">Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="variables.html">Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="access.html">Access</a></li>
</ul>
<p class="caption"><span class="caption-text">Workflow</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="importing.html">Imports (.vespene)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Launch Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#setup">Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-question-format">The Question Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="#usage">Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#limitations">Limitations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pipelines.html">Pipelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="scheduling.html">Scheduling</a></li>
<li class="toctree-l1"><a class="reference internal" href="webhooks.html">Webhooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="autoscaling.html">Autoscaling</a></li>
</ul>
<p class="caption"><span class="caption-text">Admin</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="authz.html">Authorization</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">CLI</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="settings.html">Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="upgrades.html">Upgrades</a></li>
</ul>
<p class="caption"><span class="caption-text">Community</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="resources.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="development_setup.html">Development Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="development_guide.html">Development Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ / Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="partnership.html">Partnership Program</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="contents.html">Vespene</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="contents.html">Docs</a> &raquo;</li>
        
      <li>Launch Questions</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/launch_questions.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <img alt="Vespene Logo" class="align-right" src="vespene_logo.png" />
<div class="section" id="launch-questions">
<span id="id1"></span><h1>Launch Questions<a class="headerlink" href="#launch-questions" title="Permalink to this headline">¶</a></h1>
<p>Imagine if you want to have a project launch button that asks the user some questions, and then based on those
answers, runs appropriately based on those answers.</p>
<p>This is exactly what launch questions do.</p>
<p>For instance, a generic deployment script could be written that prompts an ops engineer for the release tag, and can deploy any tag they
type in.</p>
<p>Similarly, a generic setup script for a new employee could ask for their username, and then provision lots of cloud resources for that user
to create private development or test environments.</p>
<p>Or also maybe imagine a project that reboots a region, or backs up a database, or anything.</p>
<p>You could put very complex automation in the hands of someone who shoudn’t (neccessarily) need to know how it works, and make it relatively
fool-proof to run.</p>
<p>Launch questions do just that.</p>
<img alt="Example Launch Questions" class="align-left" src="_images/launch_questions.png" />
<div class="section" id="setup">
<h2>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h2>
<p>Launch questions can be configured on either a project under the “Variables” tab.</p>
<p>The field takes JSON in list format, using a list of variable names and specifiers, as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
<span class="p">{</span> <span class="s2">&quot;variable&quot;</span><span class="p">:</span> <span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;multi&quot;</span><span class="p">,</span> <span class="s2">&quot;choices&quot;</span> <span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span> <span class="p">]</span> <span class="p">},</span>
<span class="p">{</span> <span class="s2">&quot;variable&quot;</span><span class="p">:</span> <span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;radio&quot;</span><span class="p">,</span> <span class="s2">&quot;choices&quot;</span> <span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="s2">&quot;f&quot;</span> <span class="p">]</span> <span class="p">},</span>
<span class="p">{</span> <span class="s2">&quot;variable&quot;</span><span class="p">:</span> <span class="s2">&quot;baz&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;text&quot;</span> <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>At this point, the validation on the question configuration is somewhat limited, so the best way to test the launch questions is by trying to
start the project.</p>
</div>
<div class="section" id="the-question-format">
<h2>The Question Format<a class="headerlink" href="#the-question-format" title="Permalink to this headline">¶</a></h2>
<p>Launch questions are specified by a JSON list of “question specifiers”.</p>
<p>Each question must have a type, or else it will assume to just use a “text” box, which is the default.</p>
<p>The other two types at this time (more types may come later) are “radio” and “multi”.
Radio means to pick one item from a list, and multi allows picking more
than one.</p>
<p>The variable name here controls what variable name is to be provided to the templates, and the “prompt” controls
what should be shown on the screen, as described below in “Usage”</p>
<p>At this time there isn’t much validation performed on the input values, but we’re open to improvements.
See <a class="reference internal" href="resources.html#resources"><span class="std std-ref">Community Resources</span></a> and <a class="reference internal" href="development_guide.html#development-guide"><span class="std std-ref">Development Guide</span></a> if you have ideas.</p>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>When starting a project that has launch questions attached, instead of directly starting
the project, a form will appear with the questions listed in order.</p>
<p>Then, once started, the script for the given project (or all projects, if using a pipeline) can then
access template variables:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="o">./</span><span class="n">step_one</span> <span class="o">--</span><span class="n">foo</span><span class="o">=</span><span class="s2">&quot;{{ foo }}&quot;</span> <span class="o">--</span><span class="n">bar</span><span class="o">=</span><span class="s2">&quot;{{ bar }}&quot;</span>
<span class="o">./</span><span class="n">step_two</span> <span class="o">--</span><span class="n">baz</span><span class="o">=</span><span class="s2">&quot;{{ baz }}&quot;</span>
</pre></div>
</div>
<p>As with standard builds, all of the variables made available to you are also available in ‘vespene.json’ in the
build root, which is the current working directory of the build - so this is an easy way to pass it to
any programming tool that can read JSON, or even YAML, because YAML is a subset of JSON. Many popular automation
programs can read in variables this way.</p>
</div>
<div class="section" id="limitations">
<h2>Limitations<a class="headerlink" href="#limitations" title="Permalink to this headline">¶</a></h2>
<p>When a project has launch questions attached, they are <em>NOT</em> prompted for when started by clicking on the
pipeline, or if triggered by a webhook.  The project will still run, the variables just won’t be set.</p>
<p>If you didn’t define a default value for the variable elsewhere (like in the variables page
for the project), this could result in a template error, which you can see in the build output.</p>
<p>You could also code the Jinja2 template that is using the variable somewhat defensively to check to see if the
value is set. There is also the Jinja2 filter called “| default”.  Refer to the Jinja2 documentation for
more info.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="pipelines.html" class="btn btn-neutral float-right" title="Pipelines" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="importing.html" class="btn btn-neutral" title="Importing Organizations" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Michael DeHaan LLC

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>  
  <style>
    .wy-side-nav-search, .wy-nav-top {
      background: #444444;
    }
    .wy-nav-side {
      background: #444444;
    }
  </style>

<!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-127828570-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-127828570-1');
</script>



</body>
</html>