

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Settings &mdash; Vespene  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Upgrades" href="upgrades.html" />
    <link rel="prev" title="Security Guide" href="security.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="contents.html" class="icon icon-home"> Vespene
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html">About Vespene</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">Setup Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
</ul>
<p class="caption"><span class="caption-text">Fundamentals</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="workers.html">Workers</a></li>
<li class="toctree-l1"><a class="reference internal" href="projects.html">Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="variables.html">Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="access.html">Access</a></li>
</ul>
<p class="caption"><span class="caption-text">Workflow</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="importing.html">Imports (.vespene)</a></li>
<li class="toctree-l1"><a class="reference internal" href="launch_questions.html">Launch Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="pipelines.html">Pipelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="scheduling.html">Scheduling</a></li>
<li class="toctree-l1"><a class="reference internal" href="webhooks.html">Webhooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="autoscaling.html">Autoscaling</a></li>
</ul>
<p class="caption"><span class="caption-text">Admin</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="authz.html">Authorization</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">CLI</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="security.html">Security</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Settings</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#allowed-hosts">ALLOWED_HOSTS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#buildroot-web-link">BUILDROOT_WEB_LINK</a></li>
<li class="toctree-l2"><a class="reference internal" href="#database">DATABASE</a></li>
<li class="toctree-l2"><a class="reference internal" href="#build-root">BUILD_ROOT</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fileserving-enabled">FILESERVING_ENABLED</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fileserving-hostname">FILESERVING_HOSTNAME</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fileserving-port">FILESERVING_PORT</a></li>
<li class="toctree-l2"><a class="reference internal" href="#plugins">PLUGINS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#time-display-format">TIME_DISPLAY_FORMAT</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="upgrades.html">Upgrades</a></li>
</ul>
<p class="caption"><span class="caption-text">Community</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="resources.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="development_setup.html">Development Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="development_guide.html">Development Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ / Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="partnership.html">Partnership Program</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="contents.html">Vespene</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="contents.html">Docs</a> &raquo;</li>
        
      <li>Settings</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/settings.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <img alt="Vespene Logo" class="align-right" src="vespene_logo.png" />
<div class="section" id="settings">
<span id="id1"></span><h1>Settings<a class="headerlink" href="#settings" title="Permalink to this headline">¶</a></h1>
<p>Day-to-day most configuration in Vespene (like defining new projects) will be done through the UI. Certain site-specific and admin-only behavior
is configured in settings files.</p>
<p>Because Vespene is a Django-based Python application, it uses a “settings.py” file that ships with the default Vespene
install, that includes numerous defaults.</p>
<p>To override the defaults, you can install a “local_settings.py” file (overriding any defaults you wish) in the same
directory as settings.py.</p>
<p>However, it is better to instead make any number of smaller python files in “/etc/vespene/settings.d”.  For instance,
you could make a file “/etc/vespene/settings.d/my_settings.py”.  Any file ending in “.py” will be loaded.</p>
<p>There is a bit more discussion also in <a class="reference internal" href="plugins.html#plugins"><span class="std std-ref">Plugins</span></a> and throughout the document, but below we have a list of all
user-configurable settings in alphabetical order. If a setting is in settings.py and is NOT addressed here, we don’t
recommend you tweak it.</p>
<p>It is important that all Vespene instances (web nodes and workers) have a copy of the same settings.</p>
<div class="section" id="allowed-hosts">
<h2>ALLOWED_HOSTS<a class="headerlink" href="#allowed-hosts" title="Permalink to this headline">¶</a></h2>
<p>This is a Django setting that allows for what host names are valid origins for web requests.</p>
<p>If not set, access to the Vespene UI will be limited.</p>
<p>We recommend you create a file /etc/vespene/settings.d/allowed.py that sets something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ALLOWED_HOSTS</span> <span class="o">=</span> <span class="p">[</span>
   <span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span>
   <span class="s1">&#39;.your-domain.com&#39;</span>
<span class="p">]</span>
</pre></div>
</div>
<p>The default just allows everything in, and is only appropriate for internal access.  You should not put Vespene on a public
webserver anyway (see <a class="reference internal" href="security.html#security"><span class="std std-ref">Security Guide</span></a>).  That would look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ALLOWED_HOSTS</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;*&#39;</span> <span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="buildroot-web-link">
<h2>BUILDROOT_WEB_LINK<a class="headerlink" href="#buildroot-web-link" title="Permalink to this headline">¶</a></h2>
<p>Vespene has one of two ways to serve up builds, as noted in <a class="reference internal" href="workers.html#workers"><span class="std std-ref">Workers</span></a>. If you are using <a class="reference internal" href="plugins.html#triggers"><span class="std std-ref">Trigger Plugins</span></a> to publish
builds to a particular common location, rather than desiring to serve files directly off the individual workers through the Python app, set the following
parameter and the Web UI will link to the common location instead of the in-built fileserving locations.</p>
<blockquote>
<div>BUILDROOT_WEB_LINK = “<a class="reference external" href="http://not-configured-by-your-vespene-admin-yet.example.com/builds">http://not-configured-by-your-vespene-admin-yet.example.com/builds</a>/{{ build.id }}”</div></blockquote>
<p>This could be an FTP URL, or even a smbfs network share.</p>
</div>
<div class="section" id="database">
<h2>DATABASE<a class="headerlink" href="#database" title="Permalink to this headline">¶</a></h2>
<p>“DATABASE” contains the standard connection string information for Vespene.  Technically this would support anything that
Django supports but we only “support” PostgreSQL to keep development life simple.</p>
<p>If you follow the instructions in <a class="reference internal" href="setup.html#setup"><span class="std std-ref">Setup</span></a>, you will get a file in /etc/vespene/settings.d that looks something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;ENGINE&#39;</span><span class="p">:</span> <span class="s1">&#39;django.db.backends.postgresql&#39;</span><span class="p">,</span>
        <span class="s1">&#39;NAME&#39;</span><span class="p">:</span> <span class="s1">&#39;vespene&#39;</span><span class="p">,</span>
        <span class="s1">&#39;USER&#39;</span><span class="p">:</span> <span class="s1">&#39;vespene&#39;</span><span class="p">,</span>
        <span class="s1">&#39;PASSWORD&#39;</span> <span class="p">:</span> <span class="s1">&#39;$DBPASS&#39;</span><span class="p">,</span>
        <span class="s1">&#39;HOST&#39;</span><span class="p">:</span> <span class="s1">&#39;$DBSERVER&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ATOMIC_REQUESTS&#39;</span><span class="p">:</span> <span class="kc">True</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The password and hostname should be replaced.  As noted in <a class="reference internal" href="security.html#security"><span class="std std-ref">Security Guide</span></a>, if using sudo isolation, the settings
file should not be readable by the sudo user, unless you want your builds to have database access. You don’t.</p>
</div>
<div class="section" id="build-root">
<h2>BUILD_ROOT<a class="headerlink" href="#build-root" title="Permalink to this headline">¶</a></h2>
<p>This setting chooses the temp directory each worker will use for builds. As mentioned elsewhere (see <a class="reference internal" href="plugins.html#triggers"><span class="std std-ref">Trigger Plugins</span></a>),
this is usually not the directory final build results will go to, as frequently that would be on NFS or something similar.</p>
<p>This setting actually CAN be different between workers, and has no meaning if no workers are being run on a particular Vespene
node:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">BUILD_ROOT</span> <span class="o">=</span> <span class="s2">&quot;/tmp/vespene/buildroot/&quot;</span>
</pre></div>
</div>
<p>The usage of /tmp here is probably not appropriate and you should consider changing it.  When using sudo isolation, this directory
must be writeable by the configured sudo user, and in all cases should be writeable by the user who is running the Vespene worker
processes.</p>
<p>For buildroot management tips, see ref:<cite>upkeep</cite>.</p>
</div>
<div class="section" id="fileserving-enabled">
<h2>FILESERVING_ENABLED<a class="headerlink" href="#fileserving-enabled" title="Permalink to this headline">¶</a></h2>
<p>If true, allows build results to be served up by the individual workers.  Access is annoymous and not hyper-efficient, if you want
something more robust you can use <a class="reference internal" href="plugins.html#triggers"><span class="std std-ref">Trigger Plugins</span></a> to copy build results anywhere, then set BUILDROOT_WEB_LINK as above instead:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">FILESERVING_ENABLED</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
<p>To access the fileserver and browse any build workspace within the app, click the globe icon beside any build.</p>
</div>
<div class="section" id="fileserving-hostname">
<h2>FILESERVING_HOSTNAME<a class="headerlink" href="#fileserving-hostname" title="Permalink to this headline">¶</a></h2>
<p>Before each build, a worker will run the <cite>hostname</cite> command to find out what address it has.  This address is used to generate builds
so the interface can know how to link to various files.  Should the results of <cite>hostname</cite> be unreliable, you can set this parameter
in settings explicitly to just use a hard coded setting:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">FILESERVING_HOSTNAME</span> <span class="o">=</span> <span class="s2">&quot;worker1.example.com&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="fileserving-port">
<h2>FILESERVING_PORT<a class="headerlink" href="#fileserving-port" title="Permalink to this headline">¶</a></h2>
<p>The default fileserving port used is 8000, which may not be appropriate if you decided to proxy your Vespene configuration through
something like Apache or NGINX:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">FILESERVING_PORT</span> <span class="o">=</span> <span class="mi">8000</span>
</pre></div>
</div>
<p>Otherwise, just leave it as is.</p>
</div>
<div class="section" id="plugins">
<h2>PLUGINS<a class="headerlink" href="#plugins" title="Permalink to this headline">¶</a></h2>
<p>To avoid repetition, see <a class="reference internal" href="plugins.html#plugins"><span class="std std-ref">Plugins</span></a> for more about plugin configuration.  There’s a lot you can do.</p>
</div>
<div class="section" id="time-display-format">
<h2>TIME_DISPLAY_FORMAT<a class="headerlink" href="#time-display-format" title="Permalink to this headline">¶</a></h2>
<p>For all those who would like to see their times displayed in different formats, this is for you.</p>
<p>The default is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TIME_DISPLAY_FORMAT</span> <span class="o">=</span> <span class="s2">&quot;%b </span><span class="si">%d</span><span class="s2"> %Y, %I:%M:%S %p&quot;</span>
</pre></div>
</div>
<p>This follows normal “strftime” conventions.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="upgrades.html" class="btn btn-neutral float-right" title="Upgrades" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="security.html" class="btn btn-neutral" title="Security Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Michael DeHaan LLC

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>  
  <style>
    .wy-side-nav-search, .wy-nav-top {
      background: #444444;
    }
    .wy-nav-side {
      background: #444444;
    }
  </style>

<!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-127828570-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-127828570-1');
</script>



</body>
</html>